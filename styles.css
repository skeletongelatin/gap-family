:root {
  --gap-blue: #002F94;
  --muted: #404040;
  --bg: #f6f6f8;
  --accent: #e6eefc;
}

body.vintage {
  font-family: 'Helvetica Neue', Arial, sans-serif;
  background: var(--bg);
  color: var(--muted);
}

.wrap {max-width: 980px; margin: 0 auto; padding: 18px;}
.site-header {background:#fff;border-bottom:1px solid #e1e1e1;}
.site-header .wrap {display:flex;align-items:center;justify-content:space-between;}
.nav a {margin-left:18px;text-decoration:none;color:var(--gap-blue);font-weight:600;}
.nav a.join {font-style:italic;}
.nav a:hover {text-decoration:underline;text-decoration-thickness:2px;transform:translateX(.5px);}

/* Hero image */
.hero-image {
  background: url('assets/store-empty.jpg') center/cover no-repeat;
  min-height: 60vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  color: white;
  text-shadow: 0 1px 6px rgba(0,0,0,.4);
  transition: filter 2s ease, background-image 2s ease;
  padding: 40px;
}
.hero-image h1 {font-size: 40px; margin-bottom: 10px;}
.hero-image small {font-size: 14px; color: #e0e0e0;}
.deep-loop .hero-image {filter: brightness(.65) contrast(.9);}

/* Content area */
.content {background:#fff;padding:20px;border:1px solid #eee;border-radius:3px;margin-top:-50px;position:relative;z-index:2;}
.coming {padding:10px;margin-bottom:10px;}
.btn {display:inline-block;padding:8px 14px;background:var(--gap-blue);color:white;text-decoration:none;border-radius:2px;}
.btn.ghost {background:transparent;color:var(--gap-blue);border:1px solid var(--gap-blue);}
.cta-row {margin-top:10px;display:flex;gap:10px;}

/* Products */
.grid {display:flex;gap:12px;}
.product {background:#fff;padding:8px;border:1px solid #eaeaea;width:140px;}
.product img {display:block;width:100%;height:100px;object-fit:cover;}
.pname {font-size:12px;margin-top:6px;}

/* About */
.team {display:flex;gap:18px;margin-top:12px;}
.member {background:#fff;padding:12px;border:1px solid #eee;width:48%;}
.member img {width:100%;height:180px;object-fit:cover;}
.member.faded {opacity:.86;filter:grayscale(.2);}
.small {font-size:13px;color:#666;}

/* Secret */
body.secret {background:#0b0b0c;color:#ddd;}
.records {background:#020202;color:#8ef0a1;padding:12px;border-radius:4px;}

/* Footer */
.site-footer {margin-top:30px;padding:18px 0;border-top:1px solid #eaeaea;background:#fff;}
.site-footer .tiny {font-size:11px;color:#8a8a8a;}

/* Deep loop theme tweaks */
.deep-loop body.vintage {background:#e8e8ea;color:#353535;}
.deep-loop .site-header,
.deep-loop .site-footer {filter:brightness(.9);}

/* ============================================================
   GAP Sequence styling
   ============================================================ */
.gap-sequence {
  position: relative;
  z-index: 3;
  text-align: center;
  margin: 2rem 0;
  user-select: none;
}

.gap-instruction {
  font-family: "Times New Roman", cursive;
  font-style: italic;
  font-weight: bold; 
  color: #222;
  font-size: 1.2rem;
  opacity: 0.9;
}

/* Desktop shows text; mobile shows keys */
.desktop-only { display: block; }
.mobile-only { display: none; }

@media (max-width: 768px) {
  .desktop-only { display: none; }
  .mobile-only { display: flex; justify-content: center; gap: 0.8rem; }
}

/* fix the white .coming block stacking */
.coming {
  position: relative;
  z-index: 1;
  background: white;
  padding: 1.5rem;
  border-radius: 1rem;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

/* Key visuals (mobile) */
.gap-keys {
  display: flex;
  justify-content: center;
  gap: 0.8rem;
  margin: 1.6rem 0;
}

.gap-key {
  width: 60px;
  height: 60px;
  border-radius: 8px;
  background: #fdfdfd;
  box-shadow: 0 3px 0 #ccc, 0 6px 10px rgba(0,0,0,0.15);
  transition: all 0.12s ease;
  cursor: pointer;
  user-select: none;
}

/* Mobile GAP instruction text */
.gap-mobile-instruction {
  text-align: center;
  font-family: "Times New Roman", cursive;
  font-style: italic;
  font-weight: bold;
  color: #222;
  margin-bottom: 0.6rem;
}

/* Wrap keys together nicely */
.gap-key-row {
  display: flex;
  justify-content: center;
  gap: 0.8rem;
}

.gap-key.pressed {
  transform: translateY(3px);
  box-shadow: 0 1px 0 #ccc, 0 3px 6px rgba(0,0,0,0.1);
  filter: brightness(0.95);
}

/* Wiggle prompt animation */
@keyframes keyWiggle {
  0%, 100% { transform: translateY(0); }
  25% { transform: translateY(-3px); }
  50% { transform: translateY(0); }
  75% { transform: translateY(-2px); }
}

.gap-blink {
  font-weight: 700;
  color: var(--gap-blue);
  display: inline-block;
  letter-spacing: 2px;
}

.gap-blink .dash {
  color: #000;
  opacity: 0.8;
}

.gap-blink .letter {
  opacity: 0;
  animation: typeCycle 5s infinite steps(1, end);
}

/* individual delays to stagger appearance */
.gap-blink .letter:nth-child(1) { animation-delay: 0.5s; } /* G */
.gap-blink .letter:nth-child(3) { animation-delay: 1s; }   /* A */
.gap-blink .letter:nth-child(5) { animation-delay: 1.5s; } /* P */

@keyframes typeCycle {
  0%, 10% { opacity: 0; }   /* blank start */
  11%, 70% { opacity: 1; }  /* visible (hold) */
  71%, 100% { opacity: 0; } /* fade out / reset */
}

/* Fix G-A-P overlap with Coming Soon box */
.gap-sequence {
  position: relative;
  z-index: 2;
  margin-top: 3rem;  /* adds breathing room below hero */
  margin-bottom: 3rem;
}

.content {
  margin-top: 0; /* remove the negative margin pulling it up */
}

/* GAP blue highlight */
.gap-blue {
  color: var(--gap-blue);
}

/* ============================================================
   Lights-Out Overlay + Deep Page Visuals (fixed)
   ============================================================ */
.lights-out {
  position: fixed;
  inset: 0;
  background: #000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s ease-in;
  z-index: 9999;
}

.lights-out.visible {
  opacity: 1;
}

/* Deep page “lights on again” */
body.deep-looped {
  background-color: #f8f3e0 !important;
  color: #222;
  animation: flickerOn 1.5s ease-in-out;
}

@keyframes flickerOn {
  0%, 10%, 25%, 40% { opacity: 0; }
  15%, 30%, 50%, 100% { opacity: 1; }
}

/* Subtle worn look */
body.deep-looped .hero-image,
body.deep-looped .content,
body.deep-looped .btn,
body.deep-looped .site-header,
body.deep-looped .site-footer {
  filter: sepia(0.25) brightness(0.95);
}

/* === DEEP PAGE WEIRDNESS === */
body.deep.dim-all .main,
body.deep.dim-all .site-header,
body.deep.dim-all .site-footer {
  filter: brightness(0.65) contrast(0.9);
  transform: scale(0.97);
  transition: all 0.4s ease;
}

.weird-btn {
  position: relative;
  z-index: 10;
  transition: all 0.3s ease;
}


.blink-flash {
  position: fixed;
  inset: 0;
  background: white;
  z-index: 9999;
  animation: blinkFlash 1.3s ease-in-out;
}

@keyframes blinkFlash {
  0%, 100% { opacity: 0; }
  45%, 55% { opacity: 1; }
}


/* ============================================================
   Deep Page Final Sequence — YOU ARE HERE NOW + Glitch Return
   ============================================================ */

/* === Shrink Stages (unchanged) === */
body.shrink-1 .main,
body.shrink-1 .site-header,
body.shrink-1 .site-footer {
  transform: scale(0.97);
  filter: brightness(0.85);
  transition: all 0.4s ease;
}

body.shrink-2 .main,
body.shrink-2 .site-header,
body.shrink-2 .site-footer {
  transform: scale(0.94);
  filter: brightness(0.75);
  transition: all 0.4s ease;
}

body.shrink-3 .main,
body.shrink-3 .site-header,
body.shrink-3 .site-footer {
  transform: scale(0.9);
  filter: brightness(0.6);
  transition: all 0.4s ease;
}

/* === Rumble Effect === */
@keyframes subtleRumble {
  0%,100% { transform: translate(0,0); }
  20% { transform: translate(-1px,1px); }
  40% { transform: translate(1px,-1px); }
  60% { transform: translate(-1px,-1px); }
  80% { transform: translate(1px,1px); }
}

body.rumble {
  animation: subtleRumble 0.3s ease-in-out 3;
}

/* === Final Overwhelming Button === */
.btn.final-stage {
  position: fixed !important;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(1);
  font-size: 2rem;
  padding: 2rem 4rem;
  z-index: 9998;
  background: var(--gap-blue);
  color: white;
  text-transform: uppercase;
  letter-spacing: 1px;
  box-shadow: 0 0 25px rgba(0,0,0,0.5);
  animation: rumbleGrow 2s ease-in-out infinite;
}

@keyframes rumbleGrow {
  0%,100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.05); }
}

/* === Glitch Transition Back to Normal === */
.glitch-flash {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: repeating-linear-gradient(
    0deg,
    #fff 0px,
    #fff 2px,
    #ccc 3px,
    #fff 5px
  );
  animation: glitchFlash 1.2s ease-in-out;
  opacity: 0;
}

@keyframes glitchFlash {
  0% { opacity: 0; }
  20%, 40%, 60%, 80% { opacity: 1; transform: translateY(-1px); }
  30%, 50%, 70%, 90% { opacity: 1; transform: translateY(1px); }
  100% { opacity: 0; }
}

/* ============================================================
   Promo Storm (Final Stage Visual Overload)
   ============================================================ */
.storm-btn {
  position: fixed;
  font-family: inherit;
  font-weight: bold;
  text-transform: uppercase;
  background: var(--gap-blue);
  color: white;
  padding: 0.6rem 1.2rem;
  border-radius: 4px;
  opacity: 0;
  pointer-events: none;
  z-index: 500;
  transition: opacity 0.3s ease, transform 0.4s ease;
  filter: brightness(1.2);
}

.storm-btn.show {
  opacity: 1;
  animation: promoPulse 0.8s ease-in-out;
}

@keyframes promoPulse {
  0% { transform: scale(0.6) rotate(0deg); opacity: 0; }
  50% { transform: scale(1.05) rotate(2deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); opacity: 1; }
}

.storm-btn.fade {
  opacity: 0;
  transform: scale(0.8);
  transition: opacity 0.8s ease, transform 0.8s ease;
}

/* ============================================================
   District Manager Chat — final styled + distortion reveal
   ============================================================ */

.dm-notice {
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  background: #e0eaf6;
  border: 1px solid #b0c3da;
  border-radius: 4px;
  padding: 0.5rem 1rem;
  font-family: "Arial", sans-serif;
  font-size: 0.9rem;
  box-shadow: 0 0 8px rgba(0,0,0,0.2);
  cursor: pointer;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s ease;
  z-index: 10000;
}
.dm-notice.visible {
  opacity: 1;
  pointer-events: auto;
}
.dm-notice:hover { background: #f6f9ff; }

.dm-chat {
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  width: 260px;
  background: #ffffff;
  border: 1px solid #b0c3da;
  border-radius: 6px;
  box-shadow: 0 0 12px rgba(0,0,0,0.25);
  display: none;
  flex-direction: column;
  overflow: hidden;
  z-index: 10001;
  animation: dmFadeIn 0.4s ease;
}
.dm-chat.visible { display: flex; }

@keyframes dmFadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.dm-header {
  background: #003366;
  color: #fff;
  font-size: 0.85rem;
  font-weight: bold;
  padding: 0.4rem 0.6rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-bottom: 1px solid #00264d;
}

.dm-messages {
  flex: 1;
  padding: 0.6rem;
  overflow-y: auto;
  font-family: "Arial", sans-serif;
  font-size: 0.85rem;
  color: #333;
  background: #f9fafc;
  max-height: 240px;
  position: relative;
}

.dm-message {
  background: #e9eef7;
  color: #111;
  margin-bottom: 0.4rem;
  padding: 0.4rem 0.6rem;
  border-radius: 4px;
  line-height: 1.3;
  word-wrap: break-word;
  animation: dmMessageIn 0.3s ease;
}
.dm-message.user {
  background: #d9edf7;
  text-align: right;
}
.dm-message.system {
  background: #f1f3f9;
  color: #777;
  font-style: italic;
  text-align: center;
}

@keyframes dmMessageIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

.dm-typing {
  display: flex;
  gap: 4px;
  padding: 0.4rem 0.6rem;
}
.dm-typing span {
  width: 6px;
  height: 6px;
  background: #a0a9c0;
  border-radius: 50%;
  animation: dm-dot 1s infinite;
}
.dm-typing span:nth-child(2) { animation-delay: 0.2s; }
.dm-typing span:nth-child(3) { animation-delay: 0.4s; }
@keyframes dm-dot {
  0%, 80%, 100% { opacity: 0.2; transform: translateY(0); }
  40% { opacity: 1; transform: translateY(-2px); }
}

#dm-input {
  border: none;
  border-top: 1px solid #c0cde0;
  padding: 0.5rem;
  font-size: 0.85rem;
  outline: none;
  width: 100%;
  font-family: "Arial", sans-serif;
}
#dm-input::placeholder { color: #aaa; }

/* === Glitch / Distortion effect when revealing info === */
.dm-distort {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    0deg,
    rgba(255,255,255,0.02) 0px,
    rgba(255,255,255,0.02) 1px,
    rgba(0,0,0,0.05) 2px
  );
  mix-blend-mode: overlay;
  pointer-events: none;
  opacity: 0;
  animation: distortGlitch 1.8s ease-in-out;
}

@keyframes distortGlitch {
  0%, 100% { opacity: 0; filter: none; transform: none; }
  15%, 35%, 55%, 75% { opacity: 1; filter: contrast(1.5) hue-rotate(15deg); transform: skewX(2deg); }
  25%, 45%, 65%, 85% { opacity: 1; filter: contrast(1.3) hue-rotate(-15deg); transform: skewX(-2deg); }
}


/* ============================================================
   HELP DESK BUBBLE + CHATBOX
   ============================================================ */
.help-bubble {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  background: var(--gap-blue);
  color: white;
  width: 46px;
  height: 46px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3rem;
  cursor: pointer;
  box-shadow: 0 3px 8px rgba(0,0,0,0.3);
  z-index: 9998;
  transition: transform 0.2s ease, background 0.2s ease;
}
.help-bubble:hover {
  transform: scale(1.05);
  background: #0043cc;
}

.help-chat {
  position: fixed;
  bottom: 5rem;
  right: 1rem;
  width: 260px;
  background: #ffffff;
  border: 1px solid #b0c3da;
  border-radius: 6px;
  box-shadow: 0 0 12px rgba(0,0,0,0.25);
  display: none;
  flex-direction: column;
  overflow: hidden;
  z-index: 10000;
}
.help-chat.visible { display: flex; animation: dmFadeIn 0.4s ease; }

.help-header {
  background: #003366;
  color: #fff;
  font-size: 0.85rem;
  font-weight: bold;
  padding: 0.4rem 0.6rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.help-messages {
  flex: 1;
  padding: 0.6rem;
  overflow-y: auto;
  font-family: "Arial", sans-serif;
  font-size: 0.85rem;
  color: #333;
  background: #f9fafc;
  max-height: 240px;
}

.help-message {
  background: #e9eef7;
  color: #111;
  margin-bottom: 0.4rem;
  padding: 0.4rem 0.6rem;
  border-radius: 4px;
  line-height: 1.3;
  word-wrap: break-word;
  animation: dmMessageIn 0.3s ease;
}
.help-message.user {
  background: #d9edf7;
  text-align: right;
}

.help-message.system {
  background: none;
  color: #777;
  font-style: italic;
  text-align: center;
  font-size: 0.8rem;
  padding: 0.3rem 0;
}


/* === Mobile Key Sequence Fix === */
.gap-keys {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin: 1.5rem 0;
  flex-wrap: nowrap;
  touch-action: manipulation;
}

.gap-key {
  width: 70px;
  height: auto;
  transition: transform 0.15s ease, filter 0.2s ease;
  cursor: pointer;
}

.gap-key:active {
  transform: translateY(4px) scale(0.96);
  filter: brightness(0.8);
}

.gap-instruction-mobile {
  text-align: center;
  font-size: 1.1rem;
  margin-bottom: 0.5rem;
  color: #fff;
}

@media (max-width: 768px) {
  .desktop-only { display: none; }
  .mobile-only { display: block; text-align: center; }
}

@media (min-width: 769px) {
  .mobile-only { display: none; }
}
/* ============================================================
   Floating Chat Bubble (Products Only)
   ============================================================ */
.check-bubble {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 2000;
}

.check-bubble button {
  background: var(--gap-blue);
  color: white;
  border: none;
  border-radius: 50%;
  width: 56px;
  height: 56px;
  font-size: 22px;
  cursor: pointer;
  box-shadow: 0 3px 10px rgba(0,0,0,0.25);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.check-bubble button:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 14px rgba(0,0,0,0.3);
}

@media (max-width: 768px) {
  .check-bubble {
    bottom: 16px;
    right: 16px;
  }
  .check-bubble button {
    width: 50px;
    height: 50px;
    font-size: 20px;
  }
}

/* ============================================================
   FINAL visibility fix for GAP section
   ============================================================ */
.desktop-only {
  display: block !important;
}

.mobile-only {
  display: none !important;
}

@media (max-width: 768px) {
  .desktop-only {
    display: none !important;
  }
  .mobile-only {
    display: flex !important;
  }
}
