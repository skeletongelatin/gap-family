<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>thegapfamily - back so soon</title>
  <meta name="description" content="The lights came back on, but something’s changed.">
  <link rel="stylesheet" href="styles.css">
  <script defer src="script.js"></script>

  <style>
    /* === Deep page "don't go" weirdness === */
    body.deep.dim-all .main,
    body.deep.dim-all .site-header,
    body.deep.dim-all .site-footer {
      filter: brightness(0.65) contrast(0.9);
      transform: scale(0.97);
      transition: all 0.5s ease;
    }

    .weird-btn {
      position: relative;
      z-index: 10;
      transition: all 0.4s ease;
    }

    .weird-btn.eyeball {
      background: transparent;
      border: none;
      width: 90px;
      height: 90px;
      background-image: url('assets/eye-open.png');
      background-size: cover;
      background-position: center;
      cursor: pointer;
      animation: subtlePulse 5s ease-in-out infinite;
    }

    @keyframes subtlePulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .blink-flash {
      position: fixed;
      inset: 0;
      background: white;
      z-index: 9999;
      animation: blinkFlash 1.3s ease-in-out;
    }

    @keyframes blinkFlash {
      0%, 100% { opacity: 0; }
      45%, 55% { opacity: 1; }
    }
  </style>
</head>

<body class="vintage deep" data-page="deep">
  <header class="site-header">
    <div class="wrap">
      <a href="index.html" class="logo">
        <img src="assets/logo.png" alt="gap" width="140" height="40">
      </a>
      <nav class="nav">
        <a href="products.html">Products</a>
        <a href="about.html">About</a>
        <a href="#" class="join">you're here</a>
      </nav>
    </div>
  </header>

  <main class="wrap main">
    <section class="hero hero-image" style="filter:sepia(0.4) brightness(0.8);">
      <h1>We're open always today forever open<br><small>Lloyd Center — Basement, OR</small></h1>
      <p>Everything’s still here, we promise! That's our promise foryou.</p>
    </section>

    <section class="content">
      <div class="coming">
        <strong>Reopening Again</strong>
        <p class="notice">Inventory moves, even when the store is closed!</p>
      </div>

      <div class="cta-row">
        <button class="btn weird-btn" id="weirdButton">don't go</button>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <p>&copy; <span id="year"></span> thegapfamily — the gap is always growing</p>
      <p class="tiny">Closed in 2017. open forever. don't forget to clock out</p>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const body = document.body;
    const button = document.getElementById('weirdButton');
    let clickStage = 0;

    button.addEventListener('click', () => {
      clickStage++;

      // First three clicks dim the page more each time
      if (clickStage <= 3) {
        body.classList.add('dim-all');
        setTimeout(() => body.classList.remove('dim-all'), 700);
      }

      // On the 4th click, morph into eyeball
      if (clickStage === 4) {
        button.classList.add('eyeball');
        button.textContent = '';
      }

      // Eyeball blinking and eventual reset
      if (clickStage > 4) {
        button.style.backgroundImage = "url('assets/eye-closed.png')";
        const flash = document.createElement('div');
        flash.className = 'blink-flash';
        document.body.appendChild(flash);
        setTimeout(() => flash.remove(), 1200);
        setTimeout(() => {
          button.style.backgroundImage = "url('assets/eye-open.png')";
        }, 700);

        // After a few blinks, return home
        if (clickStage >= 7) {
          const whiteout = document.createElement('div');
          whiteout.className = 'blink-flash';
          whiteout.style.animation = 'blinkFlash 2.2s ease forwards';
          document.body.appendChild(whiteout);
          setTimeout(() => {
            window.location.href = 'index.html';
          }, 2000);
        }
      }
    });
  </script>
</body>
</html>
